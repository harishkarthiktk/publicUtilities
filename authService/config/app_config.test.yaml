# Test Configuration for AuthService
# Optimized for fast test execution with minimal file I/O

# ============================================
# Application Settings
# ============================================
app:
  name: "AuthService-Test"
  environment: "test"
  version: "1.0.0"


# ============================================
# Logging Configuration
# ============================================
logging:
  # General application logging - minimal for tests
  general:
    name: "AuthManager-Test"
    level: "WARNING"              # Only warnings and errors in tests
    file: null                    # No file logging in tests
    format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
    date_format: "%Y-%m-%d %H:%M:%S"
    max_bytes: 5242880
    backup_count: 1

  # Audit logging enabled but to in-memory handler
  audit:
    enabled: false                # Disabled for tests to speed up
    file: null
    format: "[AUDIT] %(asctime)s - %(message)s"
    date_format: "%Y-%m-%d %H:%M:%S"
    max_bytes: 5242880
    backup_count: 1


# ============================================
# Authentication Settings
# ============================================
auth:
  # Hashing configuration - fast rounds for tests
  hashing:
    enabled: true
    algorithm: "bcrypt"
    bcrypt_rounds: 4              # Fast for tests (minimum safe value)

  custom_hash_function: null

  # Test defaults
  defaults:
    ip_address: "test-client"
    by_whom: "test-runner"
    user_role: "test-user"
    user_is_active: true

  # Session settings
  session:
    timeout: 600                  # 10 minutes for test sessions
    require_https: false


# ============================================
# User Management
# ============================================
users:
  config_file: "config/users.yaml"
  auto_load: true


# ============================================
# Password Migration Settings
# ============================================
migration:
  create_backup: false            # No backups in tests
  backup_extension: ".bak"
  reserved_keys:
    - "auth_type"
    - "log_level"
    - "log_file"
    - "require_https"


# ============================================
# Error Codes
# ============================================
error_codes:
  user_not_found: "USER_NOT_FOUND"
  invalid_credentials: "INVALID_CREDENTIALS"
  auth_error: "AUTH_ERROR"
  invalid_header: "INVALID_HEADER"
  invalid_encoding: "INVALID_ENCODING"
  header_parse_error: "HEADER_PARSE_ERROR"


# ============================================
# Security Policies
# ============================================
security:
  password_policy:
    min_length: 4                 # Minimal for tests
    require_uppercase: false
    require_numbers: false
    require_special: false

  rate_limiting:
    enabled: false                # Disabled for tests


# ============================================
# Framework-Specific Settings
# ============================================
frameworks:
  flask:
    host: "127.0.0.1"
    port: 5555                    # Different port to avoid conflicts
    debug: false
    cors_origins: []

  django:
    allowed_hosts:
      - "testserver"
    auth_type: "basic"

  express:
    port: 3333
    cors_enabled: false

  spring:
    port: 8888
    servlet_path: "/api"
