<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastWebDrop - Link Manager</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="app-header__brand">
            <div class="app-header__icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100%" height="100%" style="display: block;">
                    <rect width="100" height="100" fill="#4A9FD8" rx="20"/>
                    <path d="M50 20 L65 55 L50 55 L70 80 L30 50 L50 50 Z" fill="white"/>
                </svg>
            </div>
            <span>FastWebDrop</span>
        </div>
        <div class="app-header__actions">
            <select id="export-import-select" class="export-import-select">
                <option value="">Export / Import</option>
                <optgroup label="Export">
                    <option value="export-json">Export as JSON</option>
                    <option value="export-csv">Export as CSV</option>
                    <option value="export-html">Export as HTML</option>
                </optgroup>
                <option value="import">Import</option>
            </select>
            <input type="file" id="import-file" accept=".json,.csv" style="display: none;">
            <button class="theme-toggle" id="theme-toggle" type="button" title="Toggle theme">‚òÄÔ∏è</button>
        </div>
    </header>

    <!-- Main content -->
    <div class="main-container">
        <div class="content">
            <!-- Search bar -->
            <div class="search-container" id="search-container" style="display: none;">
                <div style="position: relative;">
                    <span class="search-icon">üîç</span>
                    <input
                        type="text"
                        class="search-bar"
                        id="search-input"
                        placeholder="Search links by URL or domain..."
                        aria-label="Search links"
                    >
                </div>
                <div class="search-result-count" id="result-count"></div>
            </div>

            <!-- Drop zone -->
            <div class="drop-zone" id="drop-zone">
                <div class="drop-zone__content">
                    <div class="drop-zone__icon">üì•</div>
                    <div class="drop-zone__title">Drop links here</div>
                    <div class="drop-zone__subtitle">or paste in the box below</div>
                </div>
            </div>

            <!-- Manual input section -->
            <div class="input-section">
                <div class="input-wrapper">
                    <label class="input-label" for="manual-url-input">Paste or type URL</label>
                    <input
                        type="url"
                        id="manual-url-input"
                        class="url-input"
                        placeholder="https://example.com"
                        aria-label="Enter URL"
                    >
                </div>
                <div class="input-controls">
                    <button type="button" class="add-button" id="add-button">
                        <span id="add-button-text">Add Link</span>
                    </button>
                    <select id="sort-select" class="sort-select">
                        <option value="newest">Newest first</option>
                        <option value="oldest">Oldest first</option>
                        <option value="alpha">A-Z</option>
                        <option value="domain">By Domain</option>
                    </select>
                </div>
            </div>

            <!-- Empty state -->
            <div class="empty-state" id="empty-state">
                <div class="empty-state__icon">üì≠</div>
                <h2 class="empty-state__title">No links yet</h2>
                <p class="empty-state__description">
                    Start by dropping links here, pasting them below, or using drag-and-drop from your browser.
                </p>
                <div class="empty-state__tips">
                    <div class="empty-state__tips-title">How to add links</div>
                    <ul class="empty-state__tips-list">
                        <li>Drag links from your browser tab bar</li>
                        <li>Paste links in the input field</li>
                        <li>Drag text/links from any webpage</li>
                        <li>Type or paste URLs directly</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Kanban board -->
        <div class="kanban-section">
            <div class="kanban-board">
                <div class="kanban-column" data-category="working">
                    <div class="kanban-header">
                        <h3 class="kanban-title">Working</h3>
                        <span class="kanban-count">0</span>
                    </div>
                    <ol class="link-list" id="link-list-working"></ol>
                </div>
                <div class="kanban-column" data-category="archived">
                    <div class="kanban-header">
                        <h3 class="kanban-title">Archived</h3>
                        <span class="kanban-count">0</span>
                    </div>
                    <ol class="link-list" id="link-list-archived"></ol>
                </div>
                <div class="kanban-column" data-category="temporary">
                    <div class="kanban-header">
                        <h3 class="kanban-title">Temporary</h3>
                        <span class="kanban-count">0</span>
                    </div>
                    <ol class="link-list" id="link-list-temporary"></ol>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Confirmation modal -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <h2 class="modal__title">Delete link?</h2>
            <p class="modal__description">This action cannot be undone.</p>
            <div class="modal__url" id="modal-url"></div>
            <div class="modal__actions">
                <button type="button" class="modal__button modal__button--cancel" id="cancel-button">Cancel</button>
                <button type="button" class="modal__button modal__button--confirm" id="confirm-delete">Delete</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="login-overlay" id="login-overlay" style="display: flex;">
        <div class="modal login-modal">
            <h2 class="modal__title">FastWebDrop Login</h2>
            <p class="modal__description">Please enter your credentials to continue</p>
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="login-username">Username</label>
                    <input
                        type="text"
                        id="login-username"
                        class="form-input"
                        autocomplete="username"
                        required
                        autofocus
                    />
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input
                        type="password"
                        id="login-password"
                        class="form-input"
                        autocomplete="current-password"
                        required
                    />
                </div>
                <div id="login-error" class="login-error" style="display: none;"></div>
                <div class="modal__actions">
                    <button type="submit" class="modal__button modal__button--confirm" id="login-button">
                        <span id="login-button-text">Login</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Initialize links from backend
        const INITIAL_LINKS = {{ links | tojson }};
    </script>
    <script src="/static/script.js"></script>
</body>
</html>
